# Cambiando el schema

Vamos a prestar un poco de atenciÃ³n al `schema`, a â€œlos planosâ€ de nuestra base de datos.

Los ORM tienen que controlar la estructura de la base de datos desde el cÃ³digo. AsÃ­ que de alguna forma tienen que saber que estructura tiene para sacar provecho.

ğŸ›  Abre `prisma/schema.prisma`

Cambia el `model User`  por este otro:

```typescript
model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  email     String   @unique
  name      String?
}
```

ğŸ‘€ FÃ­jate como la sintaxis trata de replicar la que suelen tener la base de datos:

- La palabra clave `model` indica que se estÃ¡ definiendo un modelo de datos.
- El nombre del modelo es "User".
- El modelo tiene cuatro campos: `id`, `createdAt`, `email` y `name`.
- `id` es un campo numÃ©rico que se establece como clave principal mediante la directiva `@id`. AdemÃ¡s, se define con la directiva `@default(autoincrement())` para que se genere automÃ¡ticamente con valores incrementales.
- `createdAt` es un campo de fecha y hora que se define con la directiva `@default(now())` para que tome automÃ¡ticamente el valor actual en el momento de la creaciÃ³n del registro.
- `email` es un campo de texto que se define con la directiva `@unique` para que tenga un valor Ãºnico en la base de datos.
- `name` es un campo de texto opcional que se define con un signo de interrogaciÃ³n despuÃ©s del tipo de datos para indicar que puede estar vacÃ­o.

ğŸ›  Es el momento de sincronizar el estado de tu base de datos con el del schema

Lanza este comando:

```bash
npx prisma db push
```

Y esto conseguirÃ¡ que tengas un campo mÃ¡s en tu base de datos.

Lanza `npx prisma studio` para verlo.

AÃ±ade tambiÃ©n un nuevo registro y verÃ¡s como se comporta ese nuevo campo `createdAt`.

```ts
await prisma.user.create({
    data: {
      name: "Chema",
      email: "panadero@malandriner.com",
    },
  })

```

## ğŸ’¦ Para que lo resuelvas tÃº

1. AÃ±ade al `model User` un campo `age` de tipo entero
2. AÃ±ade tambiÃ©n un campo `country` de tipo _string_ y que tenga un valor por defecto (por ejemplo `Spain` o lo que te apetezca.



<details>
<summary>~SoluciÃ³n~</summary>

```typescript

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  email     String   @unique
  name      String?
  age       Int
  country   String   @default("Spain")
}
// Lanza el comando npx prisma db push 

```

</details>



ğŸ‘€ FÃ­jate como te cuida Prisma cuando intentas lanzar el cambio:

```bash
âš ï¸ We found changes that cannot be executed:

  â€¢ Added the required column `age` to the `User` table without a default value. There are 3 rows in this table, it is not possible to execute this step.


? To apply this change we need to reset the database, do you want to continue? All data will be lost. â€º (y/N)
```

ğŸ›  Lanza el `yes`, estamos jugando y observa lo que pasa.
 
ğŸ Â¡Seguimos por el `ex04`!

